{"ast":null,"code":"import { reactive, ref } from \"vue\";\nimport axios from \"axios\";\nimport store from \"@/store\";\nexport default {\n  name: 'ProductsFrontend',\n  components: {},\n  setup(props) {\n    const dialogVisible = ref(false);\n    const openFormDialog = () => {\n      dialogVisible.value = true;\n    };\n    const closeFormDialog = () => {\n      dialogVisible.value = false;\n    };\n    const form = reactive({\n      quantity: 1\n    });\n    const addToCart = () => {\n      // 构建请求参数，包括商品ID和要更新的字段\n      const payload = {\n        quantity: form.quantity,\n        productid: props.id,\n        productname: props.name,\n        price: props.price,\n        username: store.state.user.username\n      };\n      console.log(payload);\n      // 发送请求到后端，更新商品字段\n      axios.post('/cart', payload).then(response => {\n        console.log('加入购物车:', response.data);\n        closeFormDialog();\n      }).catch(error => {\n        // 请求失败处理逻辑\n        console.error(\"加入购物车失败:\", error);\n      });\n    };\n    const onDelete = () => {\n      const payload = {\n        id: props.id,\n        name: props.name,\n        description: props.description,\n        quantity: props.quantity,\n        imageUrl: props.imageUrl,\n        price: props.price\n      };\n      axios.post('/delete', payload).then(closeFormDialog);\n    };\n    return {\n      dialogVisible,\n      openFormDialog,\n      closeFormDialog,\n      form,\n      addToCart,\n      onDelete\n    };\n  },\n  props: {\n    name: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    quantity: {\n      type: Number,\n      default: 1\n    },\n    description: {\n      type: String,\n      default: 'default description'\n    },\n    imageUrl: {\n      type: String,\n      required: true\n    },\n    id: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {};\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}