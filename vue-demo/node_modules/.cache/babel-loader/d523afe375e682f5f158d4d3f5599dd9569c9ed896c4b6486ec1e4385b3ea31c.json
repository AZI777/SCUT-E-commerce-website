{"ast":null,"code":"import { ref } from 'vue';\nimport axios from \"axios\";\nimport router from \"@/router\";\nimport store from '../store';\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'Login',\n  setup() {\n    const loginForm = ref({\n      username: 'admin',\n      password: 'admin'\n    });\n    const login = () => {\n      console.log(store.state);\n      axios.post('/login', {\n        username: loginForm.value.username,\n        password: loginForm.value.password\n      }).then(successResponse => {\n        if (successResponse.data.code === 200) {\n          store.commit('login', loginForm.value);\n          const path = router.currentRoute.value.query.redirect;\n          console.log(path);\n          // router.replace({ path: path === '/' || path === undefined ? '/index' : path });\n          router.replace({\n            path: path === '/' || path === undefined ? '/index' : path\n          });\n        } else {\n          alert('账号或密码错误！');\n        }\n      }).catch();\n    };\n    const sign = () => {\n      console.log(store.state);\n      axios.put('/login', {\n        username: loginForm.value.username,\n        password: loginForm.value.password\n      }).then(successResponse => {\n        if (successResponse.data.code === 200) {\n          store.commit('login', loginForm.value);\n          const path = router.currentRoute.value.query.redirect;\n          router.replace({\n            path: path === '/' || path === undefined ? '/index' : path\n          });\n        } else {\n          alert('账号或密码错误！');\n        }\n      }).catch();\n    };\n    return {\n      loginForm,\n      login,\n      sign\n    };\n  }\n};","map":{"version":3,"names":["ref","axios","router","store","name","setup","loginForm","username","password","login","console","log","state","post","value","then","successResponse","data","code","commit","path","currentRoute","query","redirect","replace","undefined","alert","catch","sign","put"],"sources":["C:\\Users\\DELL\\Desktop\\网络应用开发课程设计 - 副本\\vue-demo\\src\\components\\Login.vue"],"sourcesContent":["<template>\r\n  <body id=\"poster\">\r\n  <el-form class=\"login-container\" label-position=\"left\"\r\n           label-width=\"0px\">\r\n    <h3 class=\"login_title\">系统登录</h3>\r\n    <el-form-item>\r\n      <el-input type=\"text\" v-model=\"loginForm.username\"\r\n                auto-complete=\"off\" placeholder=\"账号\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item>\r\n      <el-input type=\"password\" v-model=\"loginForm.password\"\r\n                auto-complete=\"off\" placeholder=\"密码\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item style=\"width: 100%\">\r\n      <el-button type=\"primary\" style=\"width: 100%;background: #505458;border: none\" @click=\"login\">登录</el-button>\r\n    </el-form-item>\r\n    <el-form-item style=\"width: 100%\">\r\n      <el-button type=\"primary\" style=\"width: 100%;background: #505458;border: none\" @click=\"sign\">注册</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n  </body>\r\n</template>\r\n\r\n<script>\r\nimport {ref} from 'vue';\r\nimport axios from \"axios\";\r\nimport router from \"@/router\";\r\nimport store from '../store'\r\n\r\nexport default {\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: 'Login',\r\n  setup() {\r\n    const loginForm = ref({\r\n      username: 'admin',\r\n      password: 'admin'\r\n    });\r\n\r\n    const login = () => {\r\n      console.log(store.state);\r\n      axios\r\n          .post('/login', {\r\n            username: loginForm.value.username,\r\n            password: loginForm.value.password\r\n          })\r\n          .then(successResponse => {\r\n            if (successResponse.data.code === 200) {\r\n              store.commit('login', loginForm.value);\r\n              const path = router.currentRoute.value.query.redirect;\r\n              console.log(path);\r\n              // router.replace({ path: path === '/' || path === undefined ? '/index' : path });\r\n              router.replace({path: path === '/' || path === undefined ? '/index' : path});\r\n            } else {\r\n              alert('账号或密码错误！');\r\n            }\r\n          })\r\n          .catch();\r\n    };\r\n\r\n    const sign = () => {\r\n      console.log(store.state);\r\n      axios\r\n          .put('/login', {\r\n            username: loginForm.value.username,\r\n            password: loginForm.value.password\r\n          })\r\n          .then(successResponse => {\r\n            if (successResponse.data.code === 200) {\r\n              store.commit('login', loginForm.value);\r\n              const path = router.currentRoute.value.query.redirect;\r\n              router.replace({path: path === '/' || path === undefined ? '/index' : path});\r\n            } else {\r\n              alert('账号或密码错误！');\r\n            }\r\n          })\r\n          .catch();\r\n    };\r\n\r\n    return {\r\n      loginForm,\r\n      login,\r\n      sign,\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.login-container {\r\n  border-radius: 15px;\r\n  background-clip: padding-box;\r\n  margin: 90px auto;\r\n  width: 350px;\r\n  padding: 35px 35px 15px 35px;\r\n  background: #fff;\r\n  border: 1px solid #eaeaea;\r\n  box-shadow: 0 0 25px #cac6c6;\r\n}\r\n\r\n.login_title {\r\n  margin: 0px auto 40px auto;\r\n  text-align: center;\r\n  color: #505458;\r\n}\r\n\r\n#poster {\r\n  background: url(\"../assets/eva.jpg\") no-repeat;\r\n  background-position: center;\r\n  height: 100%;\r\n  width: 100%;\r\n  background-size: cover;\r\n  position: fixed;\r\n}\r\n\r\nbody {\r\n  margin: 0px;\r\n}\r\n\r\n\r\n</style>"],"mappings":"AAwBA,SAAQA,GAAG,QAAO,KAAK;AACvB,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,UAAU;AAC7B,OAAOC,KAAI,MAAO,UAAS;AAE3B,eAAe;EACb;EACAC,IAAI,EAAE,OAAO;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,SAAQ,GAAIN,GAAG,CAAC;MACpBO,QAAQ,EAAE,OAAO;MACjBC,QAAQ,EAAE;IACZ,CAAC,CAAC;IAEF,MAAMC,KAAI,GAAIA,CAAA,KAAM;MAClBC,OAAO,CAACC,GAAG,CAACR,KAAK,CAACS,KAAK,CAAC;MACxBX,KAAI,CACCY,IAAI,CAAC,QAAQ,EAAE;QACdN,QAAQ,EAAED,SAAS,CAACQ,KAAK,CAACP,QAAQ;QAClCC,QAAQ,EAAEF,SAAS,CAACQ,KAAK,CAACN;MAC5B,CAAC,EACAO,IAAI,CAACC,eAAc,IAAK;QACvB,IAAIA,eAAe,CAACC,IAAI,CAACC,IAAG,KAAM,GAAG,EAAE;UACrCf,KAAK,CAACgB,MAAM,CAAC,OAAO,EAAEb,SAAS,CAACQ,KAAK,CAAC;UACtC,MAAMM,IAAG,GAAIlB,MAAM,CAACmB,YAAY,CAACP,KAAK,CAACQ,KAAK,CAACC,QAAQ;UACrDb,OAAO,CAACC,GAAG,CAACS,IAAI,CAAC;UACjB;UACAlB,MAAM,CAACsB,OAAO,CAAC;YAACJ,IAAI,EAAEA,IAAG,KAAM,GAAE,IAAKA,IAAG,KAAMK,SAAQ,GAAI,QAAO,GAAIL;UAAI,CAAC,CAAC;QAC9E,OAAO;UACLM,KAAK,CAAC,UAAU,CAAC;QACnB;MACF,CAAC,EACAC,KAAK,CAAC,CAAC;IACd,CAAC;IAED,MAAMC,IAAG,GAAIA,CAAA,KAAM;MACjBlB,OAAO,CAACC,GAAG,CAACR,KAAK,CAACS,KAAK,CAAC;MACxBX,KAAI,CACC4B,GAAG,CAAC,QAAQ,EAAE;QACbtB,QAAQ,EAAED,SAAS,CAACQ,KAAK,CAACP,QAAQ;QAClCC,QAAQ,EAAEF,SAAS,CAACQ,KAAK,CAACN;MAC5B,CAAC,EACAO,IAAI,CAACC,eAAc,IAAK;QACvB,IAAIA,eAAe,CAACC,IAAI,CAACC,IAAG,KAAM,GAAG,EAAE;UACrCf,KAAK,CAACgB,MAAM,CAAC,OAAO,EAAEb,SAAS,CAACQ,KAAK,CAAC;UACtC,MAAMM,IAAG,GAAIlB,MAAM,CAACmB,YAAY,CAACP,KAAK,CAACQ,KAAK,CAACC,QAAQ;UACrDrB,MAAM,CAACsB,OAAO,CAAC;YAACJ,IAAI,EAAEA,IAAG,KAAM,GAAE,IAAKA,IAAG,KAAMK,SAAQ,GAAI,QAAO,GAAIL;UAAI,CAAC,CAAC;QAC9E,OAAO;UACLM,KAAK,CAAC,UAAU,CAAC;QACnB;MACF,CAAC,EACAC,KAAK,CAAC,CAAC;IACd,CAAC;IAED,OAAO;MACLrB,SAAS;MACTG,KAAK;MACLmB;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}