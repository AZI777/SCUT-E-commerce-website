{"ast":null,"code":"// eslint-disable-next-line no-unused-vars\nimport { reactive, ref } from \"vue\";\n// eslint-disable-next-line no-unused-vars\nimport axios from \"axios\";\nexport default {\n  name: 'ProductsBackend',\n  components: {},\n  setup(props) {\n    const dialogVisible = ref(false);\n    const openFormDialog = () => {\n      dialogVisible.value = true;\n    };\n    const closeFormDialog = () => {\n      dialogVisible.value = false;\n    };\n    const form = reactive({\n      id: props.id,\n      name: props.name,\n      description: props.description,\n      quantity: props.quantity,\n      imageUrl: props.imageUrl,\n      price: props.price\n    });\n    const onSubmit = () => {\n      // 构建请求参数，包括商品ID和要更新的字段\n      const payload = {\n        id: form.id,\n        name: form.name,\n        description: form.description,\n        quantity: form.quantity,\n        imageUrl: form.imageUrl,\n        price: form.price\n      };\n      // 发送请求到后端，更新商品字段\n      axios.put('/products', payload).then(response => {\n        console.log('数据更新:', response.data);\n        closeFormDialog();\n      }).catch(error => {\n        // 请求失败处理逻辑\n        console.error(\"更新商品信息时出错\", error);\n      });\n    };\n    const onDelete = () => {\n      const payload = {\n        id: props.id,\n        name: props.name,\n        description: props.description,\n        quantity: props.quantity,\n        imageUrl: props.imageUrl,\n        price: props.price\n      };\n      axios.post('/delete', payload).then(response => {\n        console.log(response.data);\n        closeFormDialog();\n      });\n    };\n    return {\n      dialogVisible,\n      openFormDialog,\n      closeFormDialog,\n      form,\n      onSubmit,\n      onDelete\n    };\n  },\n  props: {\n    name: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    quantity: {\n      type: Number,\n      default: 1\n    },\n    description: {\n      type: String,\n      default: 'default description'\n    },\n    imageUrl: {\n      type: String,\n      required: true\n    },\n    id: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {};\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}