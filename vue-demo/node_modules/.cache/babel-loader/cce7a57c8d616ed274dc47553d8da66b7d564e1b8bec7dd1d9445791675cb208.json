{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport store from \"@/store\";\nexport default {\n  __name: 'Cart',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const Buy = scope => {\n      console.log(scope);\n      dialogVisible.value = true;\n    };\n    const Pay = scope => {\n      console.log(scope.row);\n      // var productid = scope.row.product.id;\n      // var quantity = scope.row.quantity;\n      // axios.get('/products')\n    };\n    const Delete = item => {\n      var id = item.row.cartid;\n      console.log(item.row.cartid);\n      axios.delete(`/cart/${id}`).then(response => {\n        console.log(response);\n        // 删除成功后刷新数据\n        fetchData();\n      }).catch(error => {\n        console.error(\"删除失败:\", error);\n      });\n    };\n    const dialogVisible = ref(false);\n    const items = ref([]);\n    const fetchData = () => {\n      axios.get('/cart', {\n        params: {\n          username: store.state.user.username\n        }\n      }).then(response => {\n        items.value = response.data;\n      }).catch(error => {\n        console.error(\"导入购物车失败:\", error);\n      });\n    };\n    onMounted(fetchData);\n    const __returned__ = {\n      Buy,\n      Pay,\n      Delete,\n      dialogVisible,\n      items,\n      fetchData,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      get store() {\n        return store;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","store","Buy","scope","console","log","dialogVisible","value","Pay","row","Delete","item","id","cartid","delete","then","response","fetchData","catch","error","items","get","params","username","state","user","data"],"sources":["C:/Users/DELL/Desktop/网络应用开发课程设计/vue-demo/src/components/market/Cart.vue"],"sourcesContent":["<script setup>\r\nimport {ref, onMounted} from \"vue\"\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nconst Buy = (scope) => {\r\n  console.log(scope);\r\n  dialogVisible.value = true;\r\n}\r\n\r\nconst Pay = (scope) => {\r\n  console.log(scope.row);\r\n  // var productid = scope.row.product.id;\r\n  // var quantity = scope.row.quantity;\r\n  // axios.get('/products')\r\n}\r\n\r\nconst Delete = (item) => {\r\n  var id = item.row.cartid\r\n  console.log(item.row.cartid)\r\n  axios.delete(`/cart/${id}`)\r\n      .then(response => {\r\n        console.log(response)\r\n        // 删除成功后刷新数据\r\n        fetchData();\r\n      })\r\n      .catch(error => {\r\n        console.error(\"删除失败:\", error);\r\n      });\r\n};\r\n\r\nconst dialogVisible = ref(false)\r\n\r\nconst items = ref([])\r\n\r\nconst fetchData = () => {\r\n  axios.get('/cart', {params: {username: store.state.user.username}})\r\n      .then(response => {\r\n        items.value = response.data;\r\n      })\r\n      .catch(error => {\r\n        console.error(\"导入购物车失败:\", error);\r\n      })\r\n};\r\n\r\nonMounted(fetchData)\r\n</script>\r\n\r\n<template>\r\n  <el-table\r\n      :data=\"items\"\r\n      style=\"width: 100%\"\r\n      :show-header=\"false\"\r\n  >\r\n    <el-table-column prop=\"productname\" label=\"商品名称\" width=\"150\"/>\r\n    <el-table-column prop=\"quantity\" label=\"商品数量\" width=\"120\"/>\r\n    <el-table-column prop=\"price\" label=\"商品价格\" width=\"120\"/>\r\n    <el-table-column fixed=\"right\" label=\"Operations\" width=\"120\">\r\n      <template #default=\"scope\">\r\n        <el-button link type=\"primary\" size=\"small\" @click=\"()=>{Buy(scope)}\">购买</el-button>\r\n        <el-button link type=\"primary\" size=\"small\" @click=\"()=>{Delete(scope)}\">删除</el-button>\r\n        <el-dialog\r\n            title=\"付款\"\r\n            :model-value=\"dialogVisible\"\r\n            @close=\"dialogVisible = false\">\r\n          <el-button type=\"primary\" @click=\"()=>{Pay(scope)}\">付款</el-button>\r\n        </el-dialog>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n\r\n</template>\r\n\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AACA,SAAQA,GAAG,EAAEC,SAAS,QAAO,KAAK;AAClC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,SAAS;;;;;;;IAE3B,MAAMC,GAAG,GAAIC,KAAK,IAAK;MACrBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MAClBG,aAAa,CAACC,KAAK,GAAG,IAAI;IAC5B,CAAC;IAED,MAAMC,GAAG,GAAIL,KAAK,IAAK;MACrBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAACM,GAAG,CAAC;MACtB;MACA;MACA;IACF,CAAC;IAED,MAAMC,MAAM,GAAIC,IAAI,IAAK;MACvB,IAAIC,EAAE,GAAGD,IAAI,CAACF,GAAG,CAACI,MAAM;MACxBT,OAAO,CAACC,GAAG,CAACM,IAAI,CAACF,GAAG,CAACI,MAAM,CAAC;MAC5Bb,KAAK,CAACc,MAAM,CAAE,SAAQF,EAAG,EAAC,CAAC,CACtBG,IAAI,CAACC,QAAQ,IAAI;QAChBZ,OAAO,CAACC,GAAG,CAACW,QAAQ,CAAC;QACrB;QACAC,SAAS,CAAC,CAAC;MACb,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;QACdf,OAAO,CAACe,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;MAC/B,CAAC,CAAC;IACR,CAAC;IAED,MAAMb,aAAa,GAAGR,GAAG,CAAC,KAAK,CAAC;IAEhC,MAAMsB,KAAK,GAAGtB,GAAG,CAAC,EAAE,CAAC;IAErB,MAAMmB,SAAS,GAAGA,CAAA,KAAM;MACtBjB,KAAK,CAACqB,GAAG,CAAC,OAAO,EAAE;QAACC,MAAM,EAAE;UAACC,QAAQ,EAAEtB,KAAK,CAACuB,KAAK,CAACC,IAAI,CAACF;QAAQ;MAAC,CAAC,CAAC,CAC9DR,IAAI,CAACC,QAAQ,IAAI;QAChBI,KAAK,CAACb,KAAK,GAAGS,QAAQ,CAACU,IAAI;MAC7B,CAAC,CAAC,CACDR,KAAK,CAACC,KAAK,IAAI;QACdf,OAAO,CAACe,KAAK,CAAC,UAAU,EAAEA,KAAK,CAAC;MAClC,CAAC,CAAC;IACR,CAAC;IAEDpB,SAAS,CAACkB,SAAS,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}